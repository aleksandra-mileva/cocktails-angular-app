<div class="container login-container">
  <h2 class="login-title">Login</h2>

  <form class="login-form" #form="ngForm" (ngSubmit)="login(form)">
    <div class="form-group">
      <label for="username" class="form-label">Username</label>
      <input
        id="username"
        name="username"
        type="text"
        class="form-input"
        placeholder="username"
        [(ngModel)]="username"
        #inputUsername="ngModel"
        required
        (input)="resetBadCredentials()"/>
    </div>

    @if (inputUsername?.touched) {
      <div>
        @if (inputUsername?.errors?.['required']) {
          <p class="errors">Username is required!</p>
        }
      </div>
    }

    <div class="form-group">
      <label for="password" class="form-label">Password</label>
      <input
        id="password"
        name="password"
        type="password"
        class="form-input"
        placeholder="password"
        ngModel
        #inputPassword="ngModel"
        minlength="3"
        maxlength="20"
        required
        (input)="resetBadCredentials()"/>
    </div>

    @if (inputUsername?.touched) {
      <div>
        @if (inputPassword?.errors?.['required']) {
          <p class="errors">Password is required!</p>
        }

        @if (inputPassword?.errors?.['minlength']) {
          <p class="errors">Password must be at least 3 characters!</p>
        }

        @if (inputPassword?.errors?.['maxlength']) {
          <p class="errors">Password must be max 20 characters!</p>
        }
      </div>
    }

    @if (badCredentials) {
      <p class="bad-credentials">Invalid username or password.</p>
    }

    <div class="button-holder">
      <button class="btn-submit"
              [disabled]="form.invalid"
              [style]="{backgroundColor: form.invalid ? 'grey' : '#4ebced'}">Login
      </button>
    </div>

  </form>
</div>
@if (isLoading) {
  <app-loader class="loading-overlay"/>
}
